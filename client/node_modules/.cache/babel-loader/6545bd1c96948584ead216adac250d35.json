{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\dilji\\\\capstone\\\\sync\\\\Capstone-project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\dilji\\\\capstone\\\\sync\\\\Capstone-project\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{AUTH_SIGN_UP,AUTH_SIGN_IN,AUTH_ERROR,AUTH_SIGN_OUT}from'./types';import axios from'axios';export var signOut=function signOut(){return function(dispatch){localStorage.clear();dispatch({type:AUTH_SIGN_OUT,payload:''});};};export var checkAuth=function checkAuth(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=localStorage.getItem('JWT_TOKEN');if(!token){_context.next=8;break;}_context.next=5;return axios.get('/users/status',{headers:{'Authorization':\"\".concat(token)}});case 5:dispatch({type:AUTH_SIGN_IN});_context.next=9;break;case 8:console.log('User is not authenticated');case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);console.log('error',_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var oauthGoogle=function oauthGoogle(data){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post('/users/oauth/google',{access_token:data});case 3:res=_context2.sent;localStorage.setItem('JWT_TOKEN',res.data.token);dispatch({type:AUTH_SIGN_UP,payload:{\"jwtToken\":res.data.token,\"accessToken\":data}});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch({type:AUTH_ERROR,payload:\"A problem has occured in SignUp\"});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/dilji/capstone/sync/Capstone-project/client/src/actions/authAction.js"],"names":["AUTH_SIGN_UP","AUTH_SIGN_IN","AUTH_ERROR","AUTH_SIGN_OUT","axios","signOut","dispatch","localStorage","clear","type","payload","checkAuth","token","getItem","get","headers","console","log","oauthGoogle","data","post","access_token","res","setItem"],"mappings":"yWAAA,OAASA,YAAT,CAAuBC,YAAvB,CAAqCC,UAArC,CAAiDC,aAAjD,KAAsE,SAAtE,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAGA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACzB,MAAO,UAAAC,QAAQ,CAAI,CACfC,YAAY,CAACC,KAAb,GACAF,QAAQ,CAAC,CACLG,IAAI,CAAEN,aADD,CAELO,OAAO,CAAE,EAFJ,CAAD,CAAR,CAIH,CAND,CAOH,CARM,CAYP,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,+FAAO,iBAAML,QAAN,4IAEOM,KAFP,CAEeL,YAAY,CAACM,OAAb,CAAqB,WAArB,CAFf,KAGKD,KAHL,+CAIWR,CAAAA,KAAK,CAACU,GAAN,CAAU,eAAV,CAA2B,CAC7BC,OAAO,CAAE,CACL,0BAAoBH,KAApB,CADK,CADoB,CAA3B,CAJX,QAUKN,QAAQ,CAAC,CACLG,IAAI,CAAER,YADD,CAAD,CAAR,CAVL,6BAcKe,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAdL,wFAkBCD,OAAO,CAACC,GAAR,CAAY,OAAZ,cAlBD,qEAAP,+DAqBH,CAtBM,CA0BP,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAAC,IAAI,CAAI,CAC/B,gGAAO,kBAAMb,QAAN,sKAEmBF,CAAAA,KAAK,CAACgB,IAAN,CAAW,qBAAX,CAAkC,CAChDC,YAAY,CAAEF,IADkC,CAAlC,CAFnB,QAEOG,GAFP,gBAKCf,YAAY,CAACgB,OAAb,CAAqB,WAArB,CAAkCD,GAAG,CAACH,IAAJ,CAASP,KAA3C,EACAN,QAAQ,CAAC,CACLG,IAAI,CAAET,YADD,CAELU,OAAO,CAAE,CAAE,WAAYY,GAAG,CAACH,IAAJ,CAASP,KAAvB,CAA8B,cAAeO,IAA7C,CAFJ,CAAD,CAAR,CAND,mFAYCb,QAAQ,CAAC,CACLG,IAAI,CAAEP,UADD,CAELQ,OAAO,CAAE,iCAFJ,CAAD,CAAR,CAZD,sEAAP,iEAkBH,CAnBM","sourcesContent":["import { AUTH_SIGN_UP, AUTH_SIGN_IN, AUTH_ERROR, AUTH_SIGN_OUT } from './types';\r\nimport axios from 'axios';\r\n\r\n\r\nexport const signOut = () => {\r\n    return dispatch => {\r\n        localStorage.clear();\r\n        dispatch({\r\n            type: AUTH_SIGN_OUT,\r\n            payload: ''\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\nexport const checkAuth = () => {\r\n    return async dispatch => {\r\n        try {\r\n            const token = localStorage.getItem('JWT_TOKEN');\r\n            if (token) {\r\n                await axios.get('/users/status', {\r\n                    headers: {\r\n                        'Authorization': `${token}`\r\n                    }\r\n                });\r\n\r\n                dispatch({\r\n                    type: AUTH_SIGN_IN\r\n                });\r\n            } else {\r\n                console.log('User is not authenticated');\r\n            }\r\n\r\n        } catch (err) {\r\n            console.log('error', err)\r\n        }\r\n    };\r\n}\r\n\r\n\r\n\r\nexport const oauthGoogle = data => {\r\n    return async dispatch => {\r\n        try {\r\n            const res = await axios.post('/users/oauth/google', {\r\n                access_token: data\r\n            });\r\n            localStorage.setItem('JWT_TOKEN', res.data.token);\r\n            dispatch({\r\n                type: AUTH_SIGN_UP,\r\n                payload: { \"jwtToken\": res.data.token, \"accessToken\": data }\r\n            });\r\n\r\n        } catch (err) {\r\n            dispatch({\r\n                type: AUTH_ERROR,\r\n                payload: \"A problem has occured in SignUp\"\r\n            });\r\n        }\r\n    };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}